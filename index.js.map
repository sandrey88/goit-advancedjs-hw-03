{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '46726016-b290741f0a1b76ad16aa31499';\n\nfunction getImg(searchValue) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(`https://pixabay.com/api/?${searchParams.toString()}`).then(\n    res => {\n      if (!res.ok) {\n        throw new Error(res.status);\n      }\n\n      return res.json();\n    }\n  );\n}\n\nexport { getImg };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet galleryLightbox;\n\nfunction createCardsMarkup(cards) {\n  const cartItem = cards\n    .map(\n      ({\n        tags,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"values-container\">\n                <ul class=\"labels\">\n                    <li>Likes</li>\n                    <li>${likes}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Views</li>\n                    <li>${views}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Comments</li>\n                    <li>${comments}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Downloads</li>\n                    <li>${downloads}</li>\n                </ul>\n            </div>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  loadSimpleLitebox(cartItem);\n}\n\nfunction loadSimpleLitebox(cartItem) {\n  const gallery = document.querySelector('ul.images-div');\n  gallery.innerHTML = cartItem;\n\n  if (galleryLightbox) {\n    galleryLightbox.refresh();\n  } else {\n    galleryLightbox = new SimpleLightbox('.images-div a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport { createCardsMarkup };\n","import { getImg } from './js/pixabay-api';\nimport { createCardsMarkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst fetchUsersBtn = document.querySelector('button[type=submit]');\nconst imgs = document.querySelector('.images-div');\nconst loaderClass = document.querySelector('.loaderClass');\n\nfetchUsersBtn.addEventListener('click', handleSearch);\n\nfunction handleSearch(evt) {\n  evt.preventDefault();\n  let searchInput = document.querySelector('input[name=\"search\"]');\n  let notFoundTextEl = document.querySelector('.not-found-img');\n  let searchValue = searchInput.value.trim();\n\n  if (searchValue <= 0) {\n    iziToast.show({\n      title: '❌',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      color: 'red',\n    });\n    return;\n  }\n\n  loaderClass.style.display = 'flex';\n\n  getImg(searchValue)\n    .then(data => {\n      if (data.total === 0) {\n        imgs.innerHTML = '';\n        notFoundTextEl.innerHTML = `Results for query <span>${searchValue}</span> not found!`;\n        iziToast.show({\n          title: '❌',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#B51B1B',\n          messageColor: 'white',\n          titleColor: 'yellow',\n        });\n        return;\n      }\n\n      createCardsMarkup(data.hits);\n\n      const imageElements = document.querySelectorAll('.gallery-img');\n      const loadPromises = Array.from(imageElements).map(img => {\n        return new Promise(resolve => {\n          img.onload = resolve;\n          img.onerror = resolve;\n        });\n      });\n\n      Promise.all(loadPromises)\n        .then(() => {\n          console.log(loadPromises);\n        })\n        .catch(err => {\n          loaderClass.innerHTML = '';\n          console.error(err);\n        });\n    })\n    .catch(console.error)\n    .finally(() => {\n      console.log('completed');\n      loaderClass.style.display = 'none';\n    });\n  searchInput.value = '';\n}\n"],"names":["API_KEY","getImg","searchValue","searchParams","res","galleryLightbox","createCardsMarkup","cards","cartItem","tags","webformatURL","largeImageURL","likes","views","comments","downloads","loadSimpleLitebox","gallery","SimpleLightbox","fetchUsersBtn","imgs","loaderClass","handleSearch","evt","searchInput","notFoundTextEl","iziToast","data","imageElements","loadPromises","img","resolve","err"],"mappings":"6vBAAA,MAAMA,EAAU,qCAEhB,SAASC,EAAOC,EAAa,CAC3B,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAED,OAAO,MAAM,4BAA4BC,EAAa,SAAU,CAAA,EAAE,EAAE,KAClEC,GAAO,CACL,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAG5B,OAAOA,EAAI,MACZ,CACL,CACA,CCjBA,IAAIC,EAEJ,SAASC,EAAkBC,EAAO,CAChC,MAAMC,EAAWD,EACd,IACC,CAAC,CACC,KAAAE,EACA,aAAAC,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,wCAE4BJ,CAAa;AAAA,4CACTD,CAAY,UAAUD,CAAI;AAAA;AAAA;AAAA;AAAA,0BAI5CG,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0BAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,YAK9B,EACA,KAAK,EAAE,EAEVC,EAAkBR,CAAQ,CAC5B,CAEA,SAASQ,EAAkBR,EAAU,CACnC,MAAMS,EAAU,SAAS,cAAc,eAAe,EACtDA,EAAQ,UAAYT,EAEhBH,EACFA,EAAgB,QAAO,EAEvBA,EAAkB,IAAIa,EAAe,gBAAiB,CACpD,aAAc,MACd,aAAc,GACpB,CAAK,CAEL,CCrDA,MAAMC,EAAgB,SAAS,cAAc,qBAAqB,EAC5DC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAc,SAAS,cAAc,cAAc,EAEzDF,EAAc,iBAAiB,QAASG,CAAY,EAEpD,SAASA,EAAaC,EAAK,CACzBA,EAAI,eAAc,EAClB,IAAIC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAiB,SAAS,cAAc,gBAAgB,EACxDvB,EAAcsB,EAAY,MAAM,KAAI,EAExC,GAAItB,GAAe,EAAG,CACpBwB,EAAS,KAAK,CACZ,MAAO,IACP,QACE,2EACF,MAAO,KACb,CAAK,EACD,MACD,CAEDL,EAAY,MAAM,QAAU,OAE5BpB,EAAOC,CAAW,EACf,KAAKyB,GAAQ,CACZ,GAAIA,EAAK,QAAU,EAAG,CACpBP,EAAK,UAAY,GACjBK,EAAe,UAAY,2BAA2BvB,CAAW,qBACjEwB,EAAS,KAAK,CACZ,MAAO,IACP,QACE,2EACF,gBAAiB,UACjB,aAAc,QACd,WAAY,QACtB,CAAS,EACD,MACD,CAEDpB,EAAkBqB,EAAK,IAAI,EAE3B,MAAMC,EAAgB,SAAS,iBAAiB,cAAc,EACxDC,EAAe,MAAM,KAAKD,CAAa,EAAE,IAAIE,GAC1C,IAAI,QAAQC,GAAW,CAC5BD,EAAI,OAASC,EACbD,EAAI,QAAUC,CACxB,CAAS,CACF,EAED,QAAQ,IAAIF,CAAY,EACrB,KAAK,IAAM,CACV,QAAQ,IAAIA,CAAY,CAClC,CAAS,EACA,MAAMG,GAAO,CACZX,EAAY,UAAY,GACxB,QAAQ,MAAMW,CAAG,CAC3B,CAAS,CACT,CAAK,EACA,MAAM,QAAQ,KAAK,EACnB,QAAQ,IAAM,CACb,QAAQ,IAAI,WAAW,EACvBX,EAAY,MAAM,QAAU,MAClC,CAAK,EACHG,EAAY,MAAQ,EACtB"}